const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const _ of i)if(_.type==="childList")for(const l of _.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const _={};return i.integrity&&(_.integrity=i.integrity),i.referrerpolicy&&(_.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?_.credentials="include":i.crossorigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(i){if(i.ep)return;i.ep=!0;const _=n(i);fetch(i.href,_)}};Se();var T,u,oe,ie,S,le,G,ce,N={},ue=[],we=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function $(e,t){for(var n in t)e[n]=t[n];return e}function se(e){var t=e.parentNode;t&&t.removeChild(e)}function I(e,t,n){var r,i,_,l={};for(_ in t)_=="key"?r=t[_]:_=="ref"?i=t[_]:l[_]=t[_];if(arguments.length>2&&(l.children=arguments.length>3?T.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(_ in e.defaultProps)l[_]===void 0&&(l[_]=e.defaultProps[_]);return w(e,l,r,i,null)}function w(e,t,n,r,i){var _={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++oe:i};return i==null&&u.vnode!=null&&u.vnode(_),_}function Ae(){return{current:null}}function H(e){return e.children}function A(e,t){this.props=e,this.context=t}function P(e,t){if(t==null)return e.__?P(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?P(e):null}function ae(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ae(e)}}function M(e){(!e.__d&&(e.__d=!0)&&S.push(e)&&!j.__r++||G!==u.debounceRendering)&&((G=u.debounceRendering)||le)(j)}function j(){for(var e;j.__r=S.length;)e=S.sort(function(t,n){return t.__v.__b-n.__v.__b}),S=[],e.some(function(t){var n,r,i,_,l,f;t.__d&&(l=(_=(n=t).__v).__e,(f=n.__P)&&(r=[],(i=$({},_)).__v=_.__v+1,q(f,_,i,n.__n,f.ownerSVGElement!==void 0,_.__h!=null?[l]:null,r,l==null?P(_):l,_.__h),ve(r,_),_.__e!=l&&ae(_)))})}function fe(e,t,n,r,i,_,l,f,s,d){var o,h,a,c,p,k,v,y=r&&r.__k||ue,b=y.length;for(n.__k=[],o=0;o<t.length;o++)if((c=n.__k[o]=(c=t[o])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?w(null,c,null,null,c):Array.isArray(c)?w(H,{children:c},null,null,null):c.__b>0?w(c.type,c.props,c.key,null,c.__v):c)!=null){if(c.__=n,c.__b=n.__b+1,(a=y[o])===null||a&&c.key==a.key&&c.type===a.type)y[o]=void 0;else for(h=0;h<b;h++){if((a=y[h])&&c.key==a.key&&c.type===a.type){y[h]=void 0;break}a=null}q(e,c,a=a||N,i,_,l,f,s,d),p=c.__e,(h=c.ref)&&a.ref!=h&&(v||(v=[]),a.ref&&v.push(a.ref,null,c),v.push(h,c.__c||p,c)),p!=null?(k==null&&(k=p),typeof c.type=="function"&&c.__k===a.__k?c.__d=s=pe(c,s,e):s=he(e,c,a,y,p,s),typeof n.type=="function"&&(n.__d=s)):s&&a.__e==s&&s.parentNode!=e&&(s=P(a))}for(n.__e=k,o=b;o--;)y[o]!=null&&(typeof n.type=="function"&&y[o].__e!=null&&y[o].__e==n.__d&&(n.__d=P(r,o+1)),ye(y[o],y[o]));if(v)for(o=0;o<v.length;o++)me(v[o],v[++o],v[++o])}function pe(e,t,n){for(var r,i=e.__k,_=0;i&&_<i.length;_++)(r=i[_])&&(r.__=e,t=typeof r.type=="function"?pe(r,t,n):he(n,r,r,i,r.__e,t));return t}function de(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(n){de(n,t)}):t.push(e)),t}function he(e,t,n,r,i,_){var l,f,s;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(n==null||i!=_||i.parentNode==null)e:if(_==null||_.parentNode!==e)e.appendChild(i),l=null;else{for(f=_,s=0;(f=f.nextSibling)&&s<r.length;s+=2)if(f==i)break e;e.insertBefore(i,_),l=_}return l!==void 0?l:i.nextSibling}function Ee(e,t,n,r,i){var _;for(_ in n)_==="children"||_==="key"||_ in t||L(e,_,null,n[_],r);for(_ in t)i&&typeof t[_]!="function"||_==="children"||_==="key"||_==="value"||_==="checked"||n[_]===t[_]||L(e,_,t[_],n[_],r)}function z(e,t,n){t[0]==="-"?e.setProperty(t,n):e[t]=n==null?"":typeof n!="number"||we.test(t)?n:n+"px"}function L(e,t,n,r,i){var _;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||z(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||z(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")_=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+_]=n,n?r||e.addEventListener(t,_?K:J,_):e.removeEventListener(t,_?K:J,_);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,n):e.removeAttribute(t))}}function J(e){this.l[e.type+!1](u.event?u.event(e):e)}function K(e){this.l[e.type+!0](u.event?u.event(e):e)}function q(e,t,n,r,i,_,l,f,s){var d,o,h,a,c,p,k,v,y,b,O,x=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(s=n.__h,f=t.__e=n.__e,t.__h=null,_=[f]),(d=u.__b)&&d(t);try{e:if(typeof x=="function"){if(v=t.props,y=(d=x.contextType)&&r[d.__c],b=d?y?y.props.value:d.__:r,n.__c?k=(o=t.__c=n.__c).__=o.__E:("prototype"in x&&x.prototype.render?t.__c=o=new x(v,b):(t.__c=o=new A(v,b),o.constructor=x,o.render=He),y&&y.sub(o),o.props=v,o.state||(o.state={}),o.context=b,o.__n=r,h=o.__d=!0,o.__h=[]),o.__s==null&&(o.__s=o.state),x.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=$({},o.__s)),$(o.__s,x.getDerivedStateFromProps(v,o.__s))),a=o.props,c=o.state,h)x.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(x.getDerivedStateFromProps==null&&v!==a&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(v,b),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(v,o.__s,b)===!1||t.__v===n.__v){o.props=v,o.state=o.__s,t.__v!==n.__v&&(o.__d=!1),o.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(F){F&&(F.__=t)}),o.__h.length&&l.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(v,o.__s,b),o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(a,c,p)})}o.context=b,o.props=v,o.state=o.__s,(d=u.__r)&&d(t),o.__d=!1,o.__v=t,o.__P=e,d=o.render(o.props,o.state,o.context),o.state=o.__s,o.getChildContext!=null&&(r=$($({},r),o.getChildContext())),h||o.getSnapshotBeforeUpdate==null||(p=o.getSnapshotBeforeUpdate(a,c)),O=d!=null&&d.type===H&&d.key==null?d.props.children:d,fe(e,Array.isArray(O)?O:[O],t,n,r,i,_,l,f,s),o.base=t.__e,t.__h=null,o.__h.length&&l.push(o),k&&(o.__E=o.__=null),o.__e=!1}else _==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Te(n.__e,t,n,r,i,_,l,s);(d=u.diffed)&&d(t)}catch(F){t.__v=null,(s||_!=null)&&(t.__e=f,t.__h=!!s,_[_.indexOf(f)]=null),u.__e(F,t,n)}}function ve(e,t){u.__c&&u.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){u.__e(r,n.__v)}})}function Te(e,t,n,r,i,_,l,f){var s,d,o,h=n.props,a=t.props,c=t.type,p=0;if(c==="svg"&&(i=!0),_!=null){for(;p<_.length;p++)if((s=_[p])&&"setAttribute"in s==!!c&&(c?s.localName===c:s.nodeType===3)){e=s,_[p]=null;break}}if(e==null){if(c===null)return document.createTextNode(a);e=i?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,a.is&&a),_=null,f=!1}if(c===null)h===a||f&&e.data===a||(e.data=a);else{if(_=_&&T.call(e.childNodes),d=(h=n.props||N).dangerouslySetInnerHTML,o=a.dangerouslySetInnerHTML,!f){if(_!=null)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(o||d)&&(o&&(d&&o.__html==d.__html||o.__html===e.innerHTML)||(e.innerHTML=o&&o.__html||""))}if(Ee(e,a,h,i,f),o)t.__k=[];else if(p=t.props.children,fe(e,Array.isArray(p)?p:[p],t,n,r,i&&c!=="foreignObject",_,l,_?_[0]:n.__k&&P(n,0),f),_!=null)for(p=_.length;p--;)_[p]!=null&&se(_[p]);f||("value"in a&&(p=a.value)!==void 0&&(p!==e.value||c==="progress"&&!p||c==="option"&&p!==h.value)&&L(e,"value",p,h.value,!1),"checked"in a&&(p=a.checked)!==void 0&&p!==e.checked&&L(e,"checked",p,h.checked,!1))}return e}function me(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){u.__e(r,n)}}function ye(e,t,n){var r,i;if(u.unmount&&u.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||me(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(_){u.__e(_,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ye(r[i],t,typeof e.type!="function");n||e.__e==null||se(e.__e),e.__e=e.__d=void 0}function He(e,t,n){return this.constructor(e,n)}function R(e,t,n){var r,i,_;u.__&&u.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,_=[],q(t,e=(!r&&n||t).__k=I(H,null,[e]),i||N,N,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?T.call(t.childNodes):null,_,!r&&n?n:i?i.__e:t.firstChild,r),ve(_,e)}function ge(e,t){R(e,t,ge)}function Oe(e,t,n){var r,i,_,l=$({},e.props);for(_ in t)_=="key"?r=t[_]:_=="ref"?i=t[_]:l[_]=t[_];return arguments.length>2&&(l.children=arguments.length>3?T.call(arguments,2):n),w(e.type,l,r||e.key,i||e.ref,null)}function Fe(e,t){var n={__c:t="__cC"+ce++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,_;return this.getChildContext||(i=[],(_={})[t]=this,this.getChildContext=function(){return _},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.some(M)},this.sub=function(l){i.push(l);var f=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),f&&f.call(l)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}T=ue.slice,u={__e:function(e,t,n,r){for(var i,_,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((_=i.constructor)&&_.getDerivedStateFromError!=null&&(i.setState(_.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),l=i.__d),l)return i.__E=i}catch(f){e=f}throw e}},oe=0,ie=function(e){return e!=null&&e.constructor===void 0},A.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=$({},this.state),typeof e=="function"&&(e=e($({},n),this.props)),e&&$(n,e),e!=null&&this.__v&&(t&&this.__h.push(t),M(this))},A.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),M(this))},A.prototype.render=H,S=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,j.__r=0,ce=0;var De=Object.freeze(Object.defineProperty({__proto__:null,render:R,hydrate:ge,createElement:I,h:I,Fragment:H,createRef:Ae,get isValidElement(){return ie},Component:A,cloneElement:Oe,createContext:Fe,toChildArray:de,get options(){return u}},Symbol.toStringTag,{value:"Module"})),V,g,Z,U=0,be=[],Q=u.__b,X=u.__r,Y=u.diffed,ee=u.__c,te=u.unmount;function ke(e,t){u.__h&&u.__h(g,e,U||t),U=0;var n=g.__H||(g.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function C(e){return U=1,Ne(xe,e)}function Ne(e,t,n){var r=ke(V++,2);return r.t=e,r.__c||(r.__=[n?n(t):xe(void 0,t),function(i){var _=r.t(r.__[0],i);r.__[0]!==_&&(r.__=[_,r.__[1]],r.__c.setState({}))}],r.__c=g),r.__}function je(e,t){var n=ke(V++,3);!u.__s&&Ie(n.__H,t)&&(n.__=e,n.__H=t,g.__H.__h.push(n))}function Le(){for(var e;e=be.shift();)if(e.__P)try{e.__H.__h.forEach(D),e.__H.__h.forEach(W),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){g=null,Q&&Q(e)},u.__r=function(e){X&&X(e),V=0;var t=(g=e.__c).__H;t&&(t.__h.forEach(D),t.__h.forEach(W),t.__h=[])},u.diffed=function(e){Y&&Y(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(be.push(t)!==1&&Z===u.requestAnimationFrame||((Z=u.requestAnimationFrame)||function(n){var r,i=function(){clearTimeout(_),ne&&cancelAnimationFrame(r),setTimeout(n)},_=setTimeout(i,100);ne&&(r=requestAnimationFrame(i))})(Le)),g=null},u.__c=function(e,t){t.some(function(n){try{n.__h.forEach(D),n.__h=n.__h.filter(function(r){return!r.__||W(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],u.__e(r,n.__v)}}),ee&&ee(e,t)},u.unmount=function(e){te&&te(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{D(r)}catch(i){t=i}}),t&&u.__e(t,n.__v))};var ne=typeof requestAnimationFrame=="function";function D(e){var t=g,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),g=t}function W(e){var t=g;e.__c=e.__(),g=t}function Ie(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function xe(e,t){return typeof t=="function"?t(e):t}function Me(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var Ue=Me(De),$e,Ce,Pe,B=Ue,We=0;function _e(e,t,n,r,i){var _,l,f={};for(l in t)l=="ref"?_=t[l]:f[l]=t[l];var s={type:e,props:f,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--We,__source:i,__self:r};if(typeof e=="function"&&(_=e.defaultProps))for(l in _)f[l]===void 0&&(f[l]=_[l]);return B.options.vnode&&B.options.vnode(s),s}Pe=B.Fragment,Ce=_e,$e=_e;const m=Ce,E=$e,Be=Pe;function qe({pageSize:e,offset:t,onChangeOffset:n}){const[r,i]=C(1),[_,l]=C(1),f=()=>{n(+r+ +t)},s=()=>{n(-r+ +t)},d=()=>{n(+t-e)},o=()=>{n(+t+e)},h=()=>{n(_-1)},a=c=>p=>{const k=+p.target.value;(k===k||k==="")&&c(p.target.value)};return E("div",{id:"controls",children:[E("div",{children:[m("button",{onClick:d,children:"< Previous page"}),m("button",{onClick:s,children:"< Left"}),m("span",{children:+t+1}),m("input",{type:"text",value:r,onInput:a(i)}),m("button",{onClick:f,children:"Right >"}),m("button",{onClick:o,children:"Next page >"})]}),m("br",{}),E("div",{children:[m("span",{children:"Offset"}),m("input",{type:"text",value:_,onInput:a(l)}),m("button",{onClick:h,children:"Go"})]})]})}function Re({digits:e,size:t,cellSize:n,isFetching:r}){const i=`repeat(${t}, ${n}px)`;return e=e.slice(0,t*t),m("div",{id:"canvas",style:{gridTemplateColumns:i,gridTemplateRows:i,opacity:r?.6:1},children:e.map((_,l)=>m("div",{style:{backgroundColor:_==1?"black":"white",width:`${n}px`,height:`${n}px`}},l))})}const re=63;function Ve(){const[e,t]=C(0),[n,r]=C([]),[i,_]=C(!1),[l,f]=C(!1);return je(()=>{(async()=>{_(!0),console.log("fetching page",e+1);const s=await fetch(`https://api.pi.delivery/v1/pi?start=${e}&numberOfDigits=${1e3}&radix=10`,{cache:"force-cache"});if(s.ok){const d=(await s.json()).content.split("").reduce((o,h)=>o+(+h).toString(2).padStart(4,"0"),"");r(d.split(""))}else console.error(s.status,s.statusText,await s.text());_(!1)})()},[e]),E(Be,{children:[m("h1",{children:"Image from constructed from the digits of PI!"}),localStorage.getItem("__pi_readnotice")!=="true"&&E("footer",{children:["* each digit contributes to 4 pixels on the image"," ",m("a",{href:"#",onClick:()=>(localStorage.setItem("__pi_readnotice","true"),f(!0)),children:"hide"})]}),m(Re,{digits:n,size:re,cellSize:6,isFetching:i}),m("br",{}),m("br",{}),m("br",{}),m(qe,{onChangeOffset:s=>t(Math.max(s,0)),pageSize:re,offset:e}),m("br",{})]})}R(m(Ve,{}),document.getElementById("app"));
